<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title> Blog </title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script><!-- --- Jquery --- --> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <!-- entradas de blog -->
    <script src="blog-entrys.js"></script>
    <!-- entradas de devblog -->
    <script src="devblog-entrys.js"></script>
</head>
<body> 
  <main id="main">
    <div id="prueba"></div>
    <section id="publicaciones">
      <div  id="btn_darkmode" onclick="myFunction()"><i class="fas fa-moon"></i></div>
         <!-- blog entrys -->
         <h1>Blog:</h1>
         <div id="blog_div"></div>
         <h1>Devblog:</h1>
         <!-- devblog entrys -->
         <div id="devblog_div"></div>
    </section>
  </main>
</body>
<script>
  /*    for (i = 0; i <  5; i++) {
      document.getElementById("publicaciones").innerHTML += "<article> <h2 class='post_title' ><a 	onclick=\"get_current_id(this)\"  post_id=\""+blog_entrys[i].id  +"\" href=\"javascript:pasarVariables('blog_single.html', 'post_id')\" >"+ blog_entrys[i].titulo +"</a></h2> <p class='post_date'> Julif | "+ blog_entrys[i].fecha +"</p> "+ blog_entrys[i].entrada +"</article>";

    } */
  // blog_entrys.forEach(show_post); 
    // function myFunction(item, index) {
  //   document.getElementById("publicaciones").innerHTML += index + ":" + item.titulo + "<br>";
  // }

  show_the_post_in_destiny(blog_entrys, "blog_div")
  show_the_post_in_destiny(devblog_entrys, "devblog_div")

function show_the_post_in_destiny(arr, div){

  arr.forEach(show_post);

  function show_post(item, index){
    var d = new Date(item.fecha);

    document.getElementById(div).innerHTML +=  "<article><h2>" + item.titulo + "</h2><p class=\"post_date\">"+  d.getDate() +"/"+ d.getMonth() +"/"+ d.getFullYear() +"</p><div class='b_content' id='contenido_" + item.id +"'> contenido sin modificar </div> </article>";
  
   

 

  }
  
}


$('.b_content').each(function() {
  var str = this.id;
var res = str.substring(10 , str.length);//le quita contenido_



  console.log(res);
    $("#"+ this.id +"").load("post/"+ res +".html");
});

</script>
<script>
  

  //tema por defecto
  var dark_theme = false; 

  if (localStorage.darkmode != undefined){   JSON.parse(localStorage['darkmode']); dark_theme = localStorage.darkmode; }

if (dark_theme == true || dark_theme == "true" ) {
    document.body.classList = "dark-mode";
  } 
  function myFunction() {
     document.body.classList.toggle("dark-mode");
     dark_theme = !dark_theme;
     localStorage.darkmode = dark_theme; //guarda el tema seleccionado en un localstorage
  }

  </script>
</html>