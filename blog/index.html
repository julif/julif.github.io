<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title> Blog </title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="../style.css">


    <!-- entradas de blog -->
    <script src="../blog-entrys.js"></script>
</head>
<body> 
  <nav>
    <a href="../index.html"> Inicio </a>
    <a href="index.html" class="active"> blog </a>
    <a href="../devblog/index.html"> devblog </a>
  </nav>
<main>
  <h1> Blog </h1>
  <div id="container_btn_post">
   
    <button id="btn_list_post" onclick="lista()"> <i class="fas fa-th-list"></i> </button>
    <button id="btn_block_post" onclick="block()"> <i class="fas fa-th"></i> </button>
    <button id="btn_full_post" onclick="full()"> <i class="far fa-square"></i> </button>
    

  </div>
 
  <div id="publicaciones"></div>
</main>
<footer>
  <div class="footer_copyrigth_container">
    <linea>Â© Copyright 2019 - <span id="current_year"> julif</linea> <linea>- All Rights Reserved</linea>
    <script> document.getElementById("current_year").innerHTML = new Date().getFullYear();</script>
  </div>
</footer>
  <script>

blog_entrys.forEach(show_post);

function show_post(item, index) {

var d = new Date(item.fecha);




if ( item.thumbnail  === undefined) {  

  var str  = item.entrada;
  var elem = document.createElement('div');
 elem.style.display = 'none';
 document.body.appendChild(elem);
 elem.innerHTML = str;

 var imagen = elem.querySelector('img');

if (imagen == null) {
  item.thumbnail = 'img/thumb_default.png'
} else {
  
  var thumb_extention= imagen.src.split("/").pop().split(".")[1];
 var thumb_name= imagen.src.split("/").pop().split(".")[0];

 item.thumbnail=  thumb_name + "."+thumb_extention;
 item.thumbnail = "media/" +item.thumbnail;
}
console.log( item.thumbnail );



}



// en el caso de que no halla thumb asignar thumb por default
//if ( item.thumbnail  === undefined) {  item.thumbnail = 'img/thumb_default.png'}

// document.getElementById("publicaciones").innerHTML +=  "<article><h2>" + item.titulo + "</h2><span class='post_date'>"+  d.getDate() +"/"+ d.getMonth() +"/"+ d.getFullYear() +"</span></article>";
document.getElementById("publicaciones").innerHTML +=  "<article><section  class='post_thumbnail'><a class='thumbnail'  style='background-image: url( ../" + item.thumbnail + ");'  id='post_thumbnail_" + item.id + "' href='blog_post.html?post_id=" + item.id + "'><img class='thumbnail_img' src='../" + item.thumbnail + "' ></a></section><section class='post_content'><a   href='blog_post.html?post_id=" + item.id + "'><h2>" + item.titulo + "</h2></a><span class='post_date'>"+  d.getDate() +"/"+ d.getMonth() +"/"+ d.getFullYear() +"</span><p class='post_snippet'>" + item.snippet + "</p><div class='post_full'> " + item.entrada + " </div></section></article>";

}





// document.getElementById("post_thumbnail_blog_004").style.backgroundImage= "url('../media/ko-fi.png')";
// document.getElementById("post_thumbnail_blog_003").style.backgroundImage= "url('../media/ko-fi.png')";
// document.getElementById("post_thumbnail_blog_002").style.backgroundImage= "url('../media/ko-fi.png')";
// document.getElementById("post_thumbnail_blog_001").style.backgroundImage= "url('../img/default.png')";




  </script>
 <script>
   lista();
   //block();
  function full() {
    
    document.getElementById("btn_list_post").classList.remove("active");
    document.getElementById("btn_block_post").classList.remove("active");

    document.getElementById("btn_full_post").classList.add("active");
    //remove
    document.getElementById("publicaciones").classList.remove("post_class_block");
    document.getElementById("publicaciones").classList.remove("post_class_lista");
    //add
    document.getElementById("publicaciones").classList.add("post_class_full");
  }
  function block() {
    document.getElementById("btn_list_post").classList.remove("active");
    document.getElementById("btn_full_post").classList.remove("active");

    document.getElementById("btn_block_post").classList.add("active");
    //remove
    document.getElementById("publicaciones").classList.remove("post_class_full");
    document.getElementById("publicaciones").classList.remove("post_class_lista");
    //add
    document.getElementById("publicaciones").classList.add("post_class_block");
  }
  function lista() {
    document.getElementById("btn_block_post").classList.remove("active");
    document.getElementById("btn_full_post").classList.remove("active");

    document.getElementById("btn_list_post").classList.add("active");
    //remove
    document.getElementById("publicaciones").classList.remove("post_class_full");
    document.getElementById("publicaciones").classList.remove("post_class_block");
    //add
    document.getElementById("publicaciones").classList.add("post_class_lista");
  }
  </script>


</body>
</html>